<!DOCTYPE html>
<html lang="en">

<head>
  <style>
    #dmn-editor-container {
      height: calc(100vh - 50px);
    }

    .toolbar {
      height: 30px;
    }

    .hidden {
      display: none;
    }
  </style>

  <title></title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <script src="https://kiegroup.github.io/kogito-online/standalone/dmn/index.js"></script>
</head>

<body>
  <div class="toolbar">
    <button type="button" id="btn">Open a File</button>
    <button id="close">close</button>
  </div>
  <div id="dmn-editor-container" />

  <script>
    const btn = document.getElementById('btn')
    const filePathElement = document.getElementById('filePath')

    btn.addEventListener('click', async () => {
      const filePath = await window.electronAPI.openFile()
      // filePathElement.innerText = filePath
      const editor = DmnEditor.open({
        container: document.getElementById("dmn-editor-container"),
        initialContent: Promise.resolve(filePath),
        readOnly: false
      });
      editor.subscribeToContentChanges(isDirty => {
        console.log("saving1");
        editor.getContent().then(content => {
          console.log("saving1", content);
          window.electronAPI.save(content)
        });
      });
      document.getElementById("close").addEventListener("click", () => {
        editor.close();
      });
    })

  </script>
</body>

</html>